function Controller(){function e(o){if(!o||!o.fromAdapter){e.opts||{};for(var r=t(n),s=r.length,d=[],c=0;s>c;c++){var _=r[c];_.__transform=i(_);var u=Alloy.createController("SchoolRow",{$model:_,__parentSymbol:a});d.push(u.getViewEx({recurse:!0}))}l.__views.schoolsTableView.setData(d)}}function t(){return d.filter(function(e){return e.attributes.type==s.schoolType})}function i(e){return{imagefile:Ti.Filesystem.applicationDataDirectory+"/images/"+e.attributes.imagefile,logofile:Ti.Filesystem.applicationDataDirectory+"/images/"+e.attributes.logofile}}function o(){l.schoolsListWindow.removeEventListener("close",o),schollCollection=null,l.destroy(),l.schoolsListWindow.removeAllChildren(),l=null}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="Schools";var a=arguments[0]?arguments[0].__parentSymbol:null;arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var l=this,r={};Alloy.Collections.instance("school"),l.__views.schoolsListWindow=Ti.UI.createWindow({backgroundColor:"white",id:"schoolsListWindow",title:"Schools"}),l.__views.schoolsListWindow&&l.addTopLevelView(l.__views.schoolsListWindow),l.__views.schoolsTableView=Ti.UI.createTableView({separatorColor:"#336699",height:Ti.UI.SIZE,backgroundColor:"transparent",id:"schoolsTableView",top:"0",left:"0",layout:"vertical"}),l.__views.schoolsListWindow.add(l.__views.schoolsTableView);var n=Alloy.Collections.school||school;n.on("fetch destroy change add remove reset",e),r.destroy=function(){n.off("fetch destroy change add remove reset",e)},_.extend(l,l.__views);var s=arguments[0]||{},d=Alloy.Collections.school;switch(l.parentController=s.parentTab,l.schoolsListWindow.addEventListener("close",o),l.schoolsTableView.addEventListener("click",function(e){var t={parentTab:l.parentController,data:d.get(e.rowData.model),$model:e.rowData.model};l.parentController.open(Alloy.createController("SchoolDetail",t).getView())}),s.schoolType){case"E":l.schoolsListWindow.title="Elementary Schools";break;case"M":l.schoolsListWindow.title="Middle Schools";break;case"H":l.schoolsListWindow.title="High Schools"}d.fetch(),_.extend(l,r)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;