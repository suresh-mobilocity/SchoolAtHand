function Controller(){function e(i){if(!i||!i.fromAdapter){e.opts||{};for(var r=a.models,l=r.length,s=[],c=0;l>c;c++){var d=r[c];d.__transform=t(d);var _=Alloy.createController("SchoolRow",{$model:d,__parentSymbol:o});s.push(_.getViewEx({recurse:!0}))}n.__views.schoolsTableView.setData(s)}}function t(e){return{imagefile:Ti.Filesystem.applicationDataDirectory+"/images/"+e.attributes.imagefile,logofile:Ti.Filesystem.applicationDataDirectory+"/images/"+e.attributes.logofile}}function i(){n.eventsWindow.removeEventListener("close",i),schollCollection=null,n.destroy(),n.eventsWindow.removeAllChildren(),n=null}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="Events";var o=arguments[0]?arguments[0].__parentSymbol:null;arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var n=this,r={};Alloy.Collections.instance("school"),n.__views.eventsWindow=Ti.UI.createWindow({backgroundColor:"white",id:"eventsWindow",title:"Select School"}),n.__views.eventsWindow&&n.addTopLevelView(n.__views.eventsWindow),n.__views.schoolsTableView=Ti.UI.createTableView({separatorColor:"#336699",height:Ti.UI.SIZE,backgroundColor:"transparent",id:"schoolsTableView"}),n.__views.eventsWindow.add(n.__views.schoolsTableView);var a=Alloy.Collections.school||school;a.on("fetch destroy change add remove reset",e),r.destroy=function(){a.off("fetch destroy change add remove reset",e)},_.extend(n,n.__views);var l=arguments[0]||{},s=Alloy.Collections.school;n.parentController=l.parentTab,n.schoolsTableView.addEventListener("click",function(e){var t=JSON.stringify(s.get(e.rowData.model)),i={parentTab:n.parentController,shortname:JSON.parse(t).shortname,schoolname:JSON.parse(t).name};n.parentController.open(Alloy.createController("SchoolEvents",i).getView())}),n.eventsWindow.addEventListener("close",i),s.fetch(),_.extend(n,r)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;