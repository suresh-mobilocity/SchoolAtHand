function Controller(){function e(o){if(!o||!o.fromAdapter){e.opts||{};for(var n=r.models,a=n.length,l=[],s=0;a>s;s++){var d=n[s];d.__transform={};var c=Alloy.createController("ContactRow",{$model:d,__parentSymbol:t});l.push(c.getViewEx({recurse:!0}))}i.__views.contactsTable.setData(l)}}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="Contacts";var t=arguments[0]?arguments[0].__parentSymbol:null;arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var i=this,o={};Alloy.Collections.instance("contacts"),i.__views.districtContacts=Ti.UI.createWindow({backgroundColor:"#fff",layout:"vertical",id:"districtContacts",title:"Contacts"}),i.__views.districtContacts&&i.addTopLevelView(i.__views.districtContacts),i.__views.searchContacts=Ti.UI.createSearchBar({barColor:"#000",color:"#fff",showCancel:"true",height:"43",top:0,hintText:"Enter title or name or school",id:"searchContacts"}),i.__views.districtContacts.add(i.__views.searchContacts),i.__views.contactsTable=Ti.UI.createTableView({separatorColor:"#000000",height:Ti.UI.SIZE,backgroundColor:"#33B5E5",id:"contactsTable",filterAttribute:"filter"}),i.__views.districtContacts.add(i.__views.contactsTable);var r=Alloy.Collections.contacts||a;r.on("fetch destroy change add remove reset",e),i.__views.loading=Alloy.createWidget("com.appcelerator.loading","widget",{id:"loading",message:"loading",__parentSymbol:i.__views.districtContacts}),i.__views.loading.setParent(i.__views.districtContacts),o.destroy=function(){r.off("fetch destroy change add remove reset",e)},_.extend(i,i.__views);var n=arguments[0]||{};i.parentController=n.parentTab,i.districtContacts.title="Contacts";var a=Alloy.Collections.contacts,l=function(){var e=1;this.next=function(){return e++,e}};new l,i.searchContacts.addEventListener("change",function(){}),i.searchContacts.addEventListener("focus",function(){}),i.searchContacts.addEventListener("search",function(e){i.searchContacts.blur();var t="SELECT * FROM contacts where name like '"+e.value+"%'UNION SELECT * FROM contacts where title like + '%"+e.value+"%'UNION SELECT * FROM contacts where building like '"+e.value+"%'";a.fetch({query:t})}),i.searchContacts.addEventListener("return",function(e){i.searchContacts.blur();var t="SELECT * FROM contacts where name like '%"+e.value+"%'UNION SELECT * FROM contacts where title like + '%"+e.value+"%'UNION SELECT * FROM contacts where building like '"+e.value+"%'";a.fetch({query:t})}),i.searchContacts.addEventListener("cancel",function(){i.searchContacts.blur(),i.searchContacts.value=""}),i.contactsTable.addEventListener("scroll",function(){""!=i.searchContacts.value}),i.districtContacts.addEventListener("blur",function(){i.destroy()}),_.extend(i,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;