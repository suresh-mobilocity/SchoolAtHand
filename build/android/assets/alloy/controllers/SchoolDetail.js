function Controller(){function e(e){return{name:e.attributes.name,address1:e.attributes.address1,city:e.attributes.city,state:e.attributes.state,zipcode:e.attributes.zipcode,phone:e.attributes.phone,stateandzip:e.attributes.state+" "+e.attributes.zipcode,fax:e.attributes.fax,latitude:e.attributes.latitude,longitude:e.attributes.longitude,imagefile:Ti.Filesystem.applicationDataDirectory+"/images/"+e.attributes.imagefile,logofile:Ti.Filesystem.applicationDataDirectory+"/images/"+e.attributes.logofile,websiteurl:e.attributes.websiteurl,principal:e.attributes.principal,assistantprincipal:e.attributes.assistantprincipal,antibullyingspecialist:e.attributes.antibullyingspecialist,principal_emailaddr:e.attributes.principal_emailaddr,assistantprincipal_emailaddr:e.attributes.assistantprincipal_emailaddr,antibullyingspecialist_emailaddr:e.attributes.antibullyingspecialist_emailaddr,regular_hours:"Regular Hours: "+e.attributes.regularhours,delayed_hours:"Delayed Opening: "+e.attributes.delayedhours,earlyrelease_hours:"Early Release: "+e.attributes.earlyreleasehours,id:e.attributes.id}}function t(){var e=n.data.attributes.phone.replace(/[^0-9]/g,"");Ti.Platform.openURL("tel:"+e)}function i(){o.detailWindow.removeEventListener("close",i),o.destroy(),o.detailWindow.removeAllChildren(),o=null}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="SchoolDetail",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var o=this,a={},r={};o.schoolDetail=Alloy.createModel("school"),o.__views.detailWindow=Ti.UI.createWindow({backgroundColor:"white",title:"School Details",layout:"vertical",id:"detailWindow",model:"$.schoolDetail"}),o.__views.detailWindow&&o.addTopLevelView(o.__views.detailWindow),o.__views.schoolAddress=Ti.UI.createView({top:"2%",left:"2%",right:"2%",height:"60%",backgroundColor:"#E3E3E3",borderRadius:16,borderColor:"gray",borderWidth:2,layout:"vertical",id:"schoolAddress"}),o.__views.detailWindow.add(o.__views.schoolAddress),o.__views.schoolImage=Ti.UI.createImageView({top:5,width:64,height:64,id:"schoolImage"}),o.__views.schoolAddress.add(o.__views.schoolImage),o.__views.namelabel=Ti.UI.createLabel({textAlign:"center",font:{fontWeight:"bold",fontSize:18},color:"#000",id:"namelabel"}),o.__views.schoolAddress.add(o.__views.namelabel),o.__views.addresslabel=Ti.UI.createLabel({textAlign:"center",font:{fontSize:12},color:"#000",id:"addresslabel"}),o.__views.schoolAddress.add(o.__views.addresslabel),o.__views.citylabel=Ti.UI.createLabel({textAlign:"center",font:{fontSize:12},color:"#000",id:"citylabel"}),o.__views.schoolAddress.add(o.__views.citylabel),o.__views.stateandziplabel=Ti.UI.createLabel({textAlign:"center",font:{fontSize:12},color:"#000",id:"stateandziplabel"}),o.__views.schoolAddress.add(o.__views.stateandziplabel),o.__views.phonelabel=Ti.UI.createLabel({textAlign:"center",font:{fontSize:12},color:"#000",id:"phonelabel"}),o.__views.schoolAddress.add(o.__views.phonelabel),o.__views.__alloyId68=Ti.UI.createLabel({textAlign:"center",font:{fontSize:12},color:"#000",id:"__alloyId68"}),o.__views.schoolAddress.add(o.__views.__alloyId68),o.__views.__alloyId69=Ti.UI.createLabel({textAlign:"center",font:{fontSize:12},color:"#000",id:"__alloyId69"}),o.__views.schoolAddress.add(o.__views.__alloyId69),o.__views.__alloyId70=Ti.UI.createLabel({textAlign:"center",font:{fontSize:12},color:"#000",id:"__alloyId70"}),o.__views.schoolAddress.add(o.__views.__alloyId70),o.__views.schoolButtons=Ti.UI.createView({top:10,layout:"horizontal",height:Ti.UI.SIZE,width:"auto",left:"20%",id:"schoolButtons"}),o.__views.schoolAddress.add(o.__views.schoolButtons),o.__views.phonebutton=Ti.UI.createLabel({left:10,color:"white",backgroundColor:"#336699",width:50,height:50,font:{fontFamily:"AppIcons",fontSize:"50dp"},text:Alloy.Globals.icons.phone,textAlign:"center",borderRadius:4,id:"phonebutton"}),o.__views.schoolButtons.add(o.__views.phonebutton),t?o.__views.phonebutton.addEventListener("click",t):r["$.__views.phonebutton!click!dialPhoneNumber"]=!0,o.__views.mapbutton=Ti.UI.createLabel({left:10,color:"white",backgroundColor:"#336699",width:50,height:50,font:{fontFamily:"AppIcons",fontSize:"50dp"},text:Alloy.Globals.icons.map,textAlign:"center",borderRadius:4,id:"mapbutton"}),o.__views.schoolButtons.add(o.__views.mapbutton),o.__views.webbutton=Ti.UI.createLabel({left:10,color:"white",backgroundColor:"#336699",width:50,height:50,font:{fontFamily:"AppIcons",fontSize:"50dp"},text:Alloy.Globals.icons.globe_alt,textAlign:"center",borderRadius:4,id:"webbutton"}),o.__views.schoolButtons.add(o.__views.webbutton),o.__views.schoolContacts=Ti.UI.createView({left:"2%",right:"2%",top:"2%",bottom:"2%",backgroundColor:"#E3E3E3",borderRadius:16,borderColor:"gray",borderWidth:2,layout:"vertical",height:"30%",id:"schoolContacts"}),o.__views.detailWindow.add(o.__views.schoolContacts),o.__views.principal=Ti.UI.createView({left:"5%",height:50,layout:"horizontal",id:"principal"}),o.__views.schoolContacts.add(o.__views.principal),o.__views.principallabel=Ti.UI.createLabel({textAlign:"left",font:{fontWeight:"normal",fontSize:14},color:"black",id:"principallabel",text:"Principal:"}),o.__views.principal.add(o.__views.principallabel),o.__views.principalname=Ti.UI.createLabel({textAlign:"center",font:{fontWeight:"normal",fontSize:14},color:"blue",height:20,id:"principalname"}),o.__views.principal.add(o.__views.principalname),o.__views.emailPrincipal=Ti.UI.createButton({left:5,height:24,width:24,backgroundImage:"/images/email.png",id:"emailPrincipal"}),o.__views.principal.add(o.__views.emailPrincipal),o.__views.assistantprincipal=Ti.UI.createView({left:"5%",height:50,layout:"horizontal",id:"assistantprincipal"}),o.__views.schoolContacts.add(o.__views.assistantprincipal),o.__views.assistantprincipallabel=Ti.UI.createLabel({textAlign:"left",font:{fontWeight:"normal",fontSize:14},color:"black",height:20,id:"assistantprincipallabel",text:"Asst. Principal:"}),o.__views.assistantprincipal.add(o.__views.assistantprincipallabel),o.__views.assistantprincipalname=Ti.UI.createLabel({textAlign:"center",font:{fontWeight:"normal",fontSize:14},color:"blue",height:20,id:"assistantprincipalname"}),o.__views.assistantprincipal.add(o.__views.assistantprincipalname),o.__views.emailAsstPrincipal=Ti.UI.createButton({left:5,height:24,width:24,backgroundImage:"/images/email.png",id:"emailAsstPrincipal"}),o.__views.assistantprincipal.add(o.__views.emailAsstPrincipal),o.__views.abspecialist=Ti.UI.createView({left:"5%",height:50,layout:"horizontal",id:"abspecialist"}),o.__views.schoolContacts.add(o.__views.abspecialist),o.__views.abspecialistlabel=Ti.UI.createLabel({textAlign:"left",font:{fontWeight:"normal",fontSize:14},color:"black",height:20,id:"abspecialistlabel",text:"Anti Bullying Specialist:"}),o.__views.abspecialist.add(o.__views.abspecialistlabel),o.__views.abspecialistname=Ti.UI.createLabel({textAlign:"center",font:{fontWeight:"normal",fontSize:14},color:"blue",height:20,id:"abspecialistname"}),o.__views.abspecialist.add(o.__views.abspecialistname),o.__views.emailABSpecialist=Ti.UI.createButton({left:5,height:24,width:24,backgroundImage:"/images/email.png",id:"emailABSpecialist"}),o.__views.abspecialist.add(o.__views.emailABSpecialist);var l=function(){o.schoolImage.image=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().imagefile:o.schoolDetail.get("imagefile"),o.schoolImage.image=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().imagefile:o.schoolDetail.get("imagefile"),o.namelabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().name:o.schoolDetail.get("name"),o.namelabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().name:o.schoolDetail.get("name"),o.addresslabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().address1:o.schoolDetail.get("address1"),o.addresslabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().address1:o.schoolDetail.get("address1"),o.citylabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().city:o.schoolDetail.get("city"),o.citylabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().city:o.schoolDetail.get("city"),o.stateandziplabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().stateandzip:o.schoolDetail.get("stateandzip"),o.stateandziplabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().stateandzip:o.schoolDetail.get("stateandzip"),o.phonelabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().phone:o.schoolDetail.get("phone"),o.phonelabel.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().phone:o.schoolDetail.get("phone"),o.__alloyId68.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().regular_hours:o.schoolDetail.get("regular_hours"),o.__alloyId68.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().regular_hours:o.schoolDetail.get("regular_hours"),o.__alloyId69.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().delayed_hours:o.schoolDetail.get("delayed_hours"),o.__alloyId69.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().delayed_hours:o.schoolDetail.get("delayed_hours"),o.__alloyId70.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().earlyrelease_hours:o.schoolDetail.get("earlyrelease_hours"),o.__alloyId70.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().earlyrelease_hours:o.schoolDetail.get("earlyrelease_hours"),o.principalname.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().principal:o.schoolDetail.get("principal"),o.principalname.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().principal:o.schoolDetail.get("principal"),o.assistantprincipalname.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().assistantprincipal:o.schoolDetail.get("assistantprincipal"),o.assistantprincipalname.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().assistantprincipal:o.schoolDetail.get("assistantprincipal"),o.abspecialistname.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().antibullyingspecialist:o.schoolDetail.get("antibullyingspecialist"),o.abspecialistname.text=_.isFunction(o.schoolDetail.transform)?o.schoolDetail.transform().antibullyingspecialist:o.schoolDetail.get("antibullyingspecialist")};o.schoolDetail.on("fetch change destroy",l),a.destroy=function(){o.schoolDetail.off("fetch change destroy",l)},_.extend(o,o.__views);var n=arguments[0]||{};o.parentController=n.parentTab,o.schoolDetail=_.extend({},o.schoolDetail,{transform:function(){return e(this)}}),o.schoolDetail.set(n.data.attributes),o.mapbutton.addEventListener("click",function(){var e=Alloy.createController("MapDetail",{data:n.data.attributes});n.parentTab.open(e.getView())}),o.webbutton.addEventListener("click",function(){var e=Alloy.createController("SchoolWebSite",{data:{schoolname:n.data.attributes.name,url:n.data.attributes.websiteurl}});n.parentTab.open(e.getView())}),o.emailPrincipal.addEventListener("click",function(){var e=Ti.UI.createEmailDialog();e.subject="Hello",e.toRecipients=[n.data.attributes.principal_emailaddr],e.open()}),o.emailAsstPrincipal.addEventListener("click",function(){var e=Ti.UI.createEmailDialog();e.subject="Hello",e.toRecipients=[n.data.attributes.assistantprincipal_emailaddr],e.open()}),o.emailABSpecialist.addEventListener("click",function(){var e=Ti.UI.createEmailDialog();e.subject="Hello",e.toRecipients=[n.data.attributes.antibullyingspecialist_emailaddr],e.open()}),o.detailWindow.addEventListener("close",i),r["$.__views.phonebutton!click!dialPhoneNumber"]&&o.__views.phonebutton.addEventListener("click",t),_.extend(o,a)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;