function Controller(){function e(){var e="SELECT * from departments where name like '%Community%'",t=schoolDB.execute(e);t.getRowCount()>0&&t.isValidRow()&&(r.addresslabel.text=t.fieldByName("address"),r.citylabel.text=t.fieldByName("city"),r.stateandziplabel.text=t.fieldByName("stateandzipcode"),r.phonelabel.text=t.fieldByName("phoneno"),t.close())}function t(){var e=[],t="SELECT * from communityed",n=schoolDB.execute(t);if(n.getRowCount()>0)for(;n.isValidRow();){var a=n.fieldByName("section"),l=n.fieldByName("contactname"),s=n.fieldByName("emailaddr"),d=n.fieldByName("phoneno"),c=n.fieldByName("ext"),u=Ti.UI.createTableViewRow({layout:"vertical",height:100,borderWidth:1,borderColor:"gray"}),h=Ti.UI.createView({layout:"vertical",id:"sectionView",textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,height:Ti.UI.SIZE,width:Ti.UI.FILL}),_=Ti.UI.createLabel({text:a,id:"sectionLabel",font:{fontSize:20,fontWeight:"bold"},color:"black",height:Ti.UI.SIZE,width:Ti.UI.SIZE});Ti.UI.createView({layout:"vertical",id:"contactView",height:Ti.UI.SIZE,width:Ti.UI.SIZE});var p=Ti.UI.createLabel({left:5,text:l,id:"contactLabel",font:{fontSize:14,fontWeight:"normal"},height:Ti.UI.SIZE,width:Ti.UI.SIZE,color:"black"}),f=Ti.UI.createView({left:5,layout:"horizontal",id:"contactControls",height:Ti.UI.SIZE,width:Ti.UI.SIZE}),m=Ti.UI.createLabel({text:d,id:"contactPhone",font:{fontSize:14,fontWeight:"bold"},height:Ti.UI.SIZE,color:"blue"}),v=Ti.UI.createButton({phone:d,ext:c,left:20,height:50,width:50,backgroundImage:"/images/phone.png"}),w=Ti.UI.createButton({emailaddr:s,left:20,height:50,width:50,backgroundImage:"/images/email.png"});v.addEventListener("click",function(e){i(e.source.phone,e.source.ext)}),w.addEventListener("click",function(e){o(e.source.emailaddr)}),h.add(_),h.add(p),f.add(m),f.add(v),f.add(w),h.add(f),u.add(h),e.push(u),n.next()}n.close();var g=Titanium.UI.createTableView({data:e,separatorColor:"#000000"});r.communityEdWindow.add(g)}function i(e,t){var i=e.replace(/[^0-9]/g,"");Ti.Platform.openURL(""==t?"tel:"+i:"tel:"+i)}function o(e){var t=Ti.UI.createEmailDialog();t.subject="Hello",t.toRecipients=[e],t.open()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="CommunityEd",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var r=this,n={};r.__views.communityEdWindow=Ti.UI.createWindow({backgroundColor:"white",id:"communityEdWindow",layout:"vertical"}),r.__views.communityEdWindow&&r.addTopLevelView(r.__views.communityEdWindow),r.__views.communityEdMainView=Ti.UI.createView({id:"communityEdMainView",layout:"vertical",height:"20%",width:Ti.UI.FILL,borderWidth:"2",color:"black"}),r.__views.communityEdWindow.add(r.__views.communityEdMainView),r.__views.namelabel=Ti.UI.createLabel({font:{fontSize:18},color:"#000",text:"Community Education Dept",id:"namelabel"}),r.__views.communityEdMainView.add(r.__views.namelabel),r.__views.contactsView=Ti.UI.createView({id:"contactsView",layout:"horizontal"}),r.__views.communityEdMainView.add(r.__views.contactsView),r.__views.address=Ti.UI.createView({id:"address",layout:"vertical",width:"70%"}),r.__views.contactsView.add(r.__views.address),r.__views.addresslabel=Ti.UI.createLabel({font:{fontSize:14},color:"#000",text:"Address",id:"addresslabel",left:"10"}),r.__views.address.add(r.__views.addresslabel),r.__views.citylabel=Ti.UI.createLabel({font:{fontSize:14},color:"#000",text:"City",id:"citylabel",left:"10"}),r.__views.address.add(r.__views.citylabel),r.__views.stateandziplabel=Ti.UI.createLabel({font:{fontSize:14},color:"#000",text:"08852",id:"stateandziplabel",left:"10"}),r.__views.address.add(r.__views.stateandziplabel),r.__views.phonelabel=Ti.UI.createLabel({font:{fontSize:14},color:"#000",text:"phonenumber",id:"phonelabel",left:"10"}),r.__views.address.add(r.__views.phonelabel),r.__views.Buttons=Ti.UI.createView({id:"Buttons"}),r.__views.contactsView.add(r.__views.Buttons),r.__views.phonebutton=Ti.UI.createButton({width:32,height:32,backgroundImage:"/images/phone.png",id:"phonebutton"}),r.__views.Buttons.add(r.__views.phonebutton),n.destroy=function(){},_.extend(r,r.__views);var a=arguments[0]||{};r.parentController=a.parentTab,r.communityEdWindow.title="Community Education",e(),t(),_.extend(r,n)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;