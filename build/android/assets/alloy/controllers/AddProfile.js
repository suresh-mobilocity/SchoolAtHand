function Controller(){function t(){var t=null;t="SELECT name from schools";var i=schoolDB.execute(t),r=Ti.UI.createPickerColumn();if(i.getRowCount()>0){for(var o=0;i.isValidRow();){o++;var n=i.fieldByName("name"),a=Ti.UI.createPickerRow({title:n});r.addRow(a),i.next()}i.close()}e.schoolPickerField.add([r])}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="AddProfile",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var e=this,i={};e.__views.profileAddWindow=Ti.UI.createWindow({backgroundColor:"white",title:"Add Student Profile",layout:"vertical",id:"profileAddWindow"}),e.__views.profileAddWindow&&e.addTopLevelView(e.__views.profileAddWindow),e.__views.profileInputForm=Ti.UI.createScrollView({id:"profileInputForm",layout:"vertical"}),e.__views.profileAddWindow.add(e.__views.profileInputForm),e.__views.nameTextField=Ti.UI.createTextField({top:40,left:"10%",width:"80%",keyboardType:Titanium.UI.KEYBOARD_DEFAULT,returnKeyType:Titanium.UI.RETURNKEY_DONE,hintText:"Enter Student or Profile Name",color:"black",height:Ti.UI.SIZE,font:{fontSize:14,fontWeight:"bold",fontFamily:"Helvetica",fontStyle:"normal"},id:"nameTextField"}),e.__views.profileInputForm.add(e.__views.nameTextField),e.__views.inputView=Ti.UI.createView({top:20,height:Ti.UI.SIZE,id:"inputView",layout:"horizontal"}),e.__views.profileInputForm.add(e.__views.inputView),e.__views.gradeLabelField=Ti.UI.createLabel({left:"10%",color:"blue",height:Ti.UI.SIZE,width:"80%",font:{fontSize:14,fontWeight:"bold",fontFamily:"Helvetica",fontStyle:"normal"},id:"gradeLabelField"}),e.__views.inputView.add(e.__views.gradeLabelField),e.__views.gradeFieldSlider=Ti.UI.createSlider({min:0,max:12,value:5,left:"5%",top:20,width:"80%",height:Ti.UI.SIZE,id:"gradeFieldSlider"}),e.__views.inputView.add(e.__views.gradeFieldSlider),e.__views.schoolPickerField=Ti.UI.createPicker({top:20,height:Ti.UI.SIZE,width:"80%",useSpinner:"true",id:"schoolPickerField",selectionIndicator:"true"}),e.__views.profileInputForm.add(e.__views.schoolPickerField),e.__views.__alloyId0=Ti.UI.createLabel({left:"10%",color:"blue",height:Ti.UI.SIZE,width:Ti.UI.FILL,font:{fontSize:10,fontWeight:"normal",fontFamily:"Helvetica"},text:"* App will retrieve events and other useful info for the selected school",id:"__alloyId0"}),e.__views.profileInputForm.add(e.__views.__alloyId0),e.__views.teacherTextField=Ti.UI.createTextField({left:"10%",width:"80%",keyboardType:Titanium.UI.KEYBOARD_DEFAULT,returnKeyType:Titanium.UI.RETURNKEY_DONE,borderWidth:2,font:{fontSize:14,fontWeight:"bold",fontFamily:"Helvetica",fontStyle:"normal"},hintText:"Enter Teacher Name",color:"black",top:20,height:Ti.UI.SIZE,id:"teacherTextField"}),e.__views.profileInputForm.add(e.__views.teacherTextField),e.__views.__alloyId1=Ti.UI.createLabel({left:"10%",color:"blue",height:Ti.UI.SIZE,width:Ti.UI.FILL,font:{fontSize:10,fontWeight:"normal",fontFamily:"Helvetica"},text:"* App will retrieve e-mail and phone number from school directory",id:"__alloyId1"}),e.__views.profileInputForm.add(e.__views.__alloyId1),e.__views.saveButton=Ti.UI.createButton({title:"Save",backgroundColor:"#336699",borderRadius:8,top:20,width:"80%",height:50,font:{fontSize:14,fontWeight:"bold"},color:"white",id:"saveButton"}),e.__views.profileInputForm.add(e.__views.saveButton),i.destroy=function(){},_.extend(e,e.__views),arguments[0]||{};var r=6;e.gradeFieldSlider.text=e.gradeFieldSlider.value,t(r),e.schoolPickerField.addEventListener("focus",function(){}),e.gradeFieldSlider.addEventListener("change",function(t){switch(r=Math.round(t.value)){case 0:e.gradeLabelField.text="Grade: KG";break;case 1:e.gradeLabelField.text="Grade: 1st";break;case 2:e.gradeLabelField.text="Grade: 2nd";break;case 3:e.gradeLabelField.text="Grade: 3rd";break;default:e.gradeLabelField.text="Grade: "+r+"th"}}),e.saveButton.addEventListener("click",function(){if(""==e.nameTextField.value)return void alert("Error:\nStudent Profiel name field empty");var t=Alloy.createModel("profile",{name:e.nameTextField.value,grade:e.gradeLabelField.text,school:e.schoolPickerField.getSelectedRow(0).title,teacher:e.teacherTextField.value});t.save(),profileCollection.fetch(),e.profileAddWindow.close(),profileCollection.trigger("change")}),_.extend(e,i)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;